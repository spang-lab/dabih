import{r as p,R,P as te,n as se,q as Ie,o as N,f as H,h as X,y as Y,$ as Ue,i as Qe,w as Ve,k as je,s as Ke,m as Z,t as Ge,x as He,p as qe,e as We,z as Xe,A as Ye,C as Ze,v as ie,O as ge,E as Je,D as w,G as et,j as a,u as tt,a as pe}from"./index-D81WwACb.js";import nt from"./Token-BpeZbAcR.js";import{T as ot}from"./Switch-BsbkrgHu.js";import{D as st,a as it}from"./Transition-D4OxtElp.js";import{r as W}from"./index-BLzTb_JD.js";import{c as g,f as ne,F as rt,e as at,k as lt,g as oe,y as ut,l as ct,R as dt,T as pt,d as ft,u as mt,b as vt,A as xt}from"./calculate-active-index-PrioCODW.js";import{V as bt,u as ht,N as gt,l as yt,T as Ot,Q as St,j as wt,p as $t}from"./label-DeZCyrFp.js";import{a as kt,h as fe,x as Te,k as Et,P as It,c as jt,S as L,n as ye,p as Tt,f as Rt,y as Ct,b as Nt,d as Dt,j as Lt,T as Oe,A as Pt,i as At}from"./portal-CrkO56Jr.js";import{U as Ft,a as Mt}from"./description-CHTAMN5B.js";import{q as Re,z as Ce}from"./dialog-YppJ8AFh.js";import{C as _t}from"./copy-BIumn5ZQ.js";import{P as Bt}from"./plus-DkAvrrvl.js";import"./LocalDate-BIT0VlXU.js";import"./trash-2-DYQ5HbAl.js";function me(){return me=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},me.apply(this,arguments)}function zt(e,s){if(e==null)return{};var t=Ut(e,s),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function Ut(e,s){if(e==null)return{};var t={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(s.indexOf(o)>=0)&&(t[o]=e[o]);return t}var xe=p.forwardRef(function(e,s){var t=e.color,n=t===void 0?"currentColor":t,o=e.size,i=o===void 0?24:o,l=zt(e,["color","size"]);return R.createElement("svg",me({ref:s,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),R.createElement("polyline",{points:"6 9 12 15 18 9"}))});xe.propTypes={color:te.string,size:te.oneOfType([te.string,te.number])};xe.displayName="ChevronDown";function Qt(e,s){let t=p.useRef({left:0,top:0});if(se(()=>{if(!s)return;let o=s.getBoundingClientRect();o&&(t.current=o)},[e,s]),s==null||!e||s===document.activeElement)return!1;let n=s.getBoundingClientRect();return n.top!==t.current.top||n.left!==t.current.left}let Se=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function we(e){var s,t;let n=(s=e.innerText)!=null?s:"",o=e.cloneNode(!0);if(!Ie(o))return n;let i=!1;for(let c of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),i=!0;let l=i?(t=o.innerText)!=null?t:"":n;return Se.test(l)&&(l=l.replace(Se,"")),l}function Vt(e){let s=e.getAttribute("aria-label");if(typeof s=="string")return s.trim();let t=e.getAttribute("aria-labelledby");if(t){let n=t.split(" ").map(o=>{let i=document.getElementById(o);if(i){let l=i.getAttribute("aria-label");return typeof l=="string"?l.trim():we(i).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return we(e).trim()}function Kt(e){let s=p.useRef(""),t=p.useRef("");return N(()=>{let n=e.current;if(!n)return"";let o=n.innerText;if(s.current===o)return t.current;let i=Vt(n).trim().toLowerCase();return s.current=o,t.current=i,i})}var Gt=Object.defineProperty,Ht=(e,s,t)=>s in e?Gt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,$e=(e,s,t)=>(Ht(e,typeof s!="symbol"?s+"":s,t),t),O=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(O||{}),M=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(M||{}),ve=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ve||{}),Ne=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOptions=5]="RegisterOptions",e[e.UnregisterOptions=6]="UnregisterOptions",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetOptionsElement=8]="SetOptionsElement",e[e.SortOptions=9]="SortOptions",e))(Ne||{});function ke(e,s=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=It(s(e.options.slice()),i=>i.dataRef.current.domRef.current),o=t?n.indexOf(t):null;return o===-1&&(o=null),{options:n,activeOptionIndex:o}}let qt={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,pendingFocus:{focus:g.Nothing},listboxState:1,__demoMode:!1}},0(e,s){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,o=e.options.findIndex(i=>n(i.dataRef.current.value));return o!==-1&&(t=o),{...e,pendingFocus:s.focus,listboxState:0,activeOptionIndex:t,__demoMode:!1}},2(e,s){var t,n,o,i,l;if(e.dataRef.current.disabled||e.listboxState===1)return e;let c={...e,searchQuery:"",activationTrigger:(t=s.trigger)!=null?t:1,__demoMode:!1};if(s.focus===g.Nothing)return{...c,activeOptionIndex:null};if(s.focus===g.Specific)return{...c,activeOptionIndex:e.options.findIndex(u=>u.id===s.id)};if(s.focus===g.Previous){let u=e.activeOptionIndex;if(u!==null){let f=e.options[u].dataRef.current.domRef,d=ne(s,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled});if(d!==null){let r=e.options[d].dataRef.current.domRef;if(((n=f.current)==null?void 0:n.previousElementSibling)===r.current||((o=r.current)==null?void 0:o.previousElementSibling)===null)return{...c,activeOptionIndex:d}}}}else if(s.focus===g.Next){let u=e.activeOptionIndex;if(u!==null){let f=e.options[u].dataRef.current.domRef,d=ne(s,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled});if(d!==null){let r=e.options[d].dataRef.current.domRef;if(((i=f.current)==null?void 0:i.nextElementSibling)===r.current||((l=r.current)==null?void 0:l.nextElementSibling)===null)return{...c,activeOptionIndex:d}}}}let x=ke(e),m=ne(s,{resolveItems:()=>x.options,resolveActiveIndex:()=>x.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});return{...c,...x,activeOptionIndex:m}},3:(e,s)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let t=e.searchQuery!==""?0:1,n=e.searchQuery+s.value.toLowerCase(),o=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+t).concat(e.options.slice(0,e.activeOptionIndex+t)):e.options).find(l=>{var c;return!l.dataRef.current.disabled&&((c=l.dataRef.current.textValue)==null?void 0:c.startsWith(n))}),i=o?e.options.indexOf(o):-1;return i===-1||i===e.activeOptionIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeOptionIndex:i,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,s)=>{let t=e.options.concat(s.options),n=e.activeOptionIndex;if(e.pendingFocus.focus!==g.Nothing&&(n=ne(e.pendingFocus,{resolveItems:()=>t,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled})),e.activeOptionIndex===null){let{isSelected:o}=e.dataRef.current;if(o){let i=t.findIndex(l=>o?.(l.dataRef.current.value));i!==-1&&(n=i)}}return{...e,options:t,activeOptionIndex:n,pendingFocus:{focus:g.Nothing},pendingShouldSort:!0}},6:(e,s)=>{let t=e.options,n=[],o=new Set(s.options);for(let[i,l]of t.entries())if(o.has(l.id)&&(n.push(i),o.delete(l.id),o.size===0))break;if(n.length>0){t=t.slice();for(let i of n.reverse())t.splice(i,1)}return{...e,options:t,activationTrigger:1}},7:(e,s)=>e.buttonElement===s.element?e:{...e,buttonElement:s.element},8:(e,s)=>e.optionsElement===s.element?e:{...e,optionsElement:s.element},9:e=>e.pendingShouldSort?{...e,...ke(e),pendingShouldSort:!1}:e};class be extends kt{constructor(s){super(s),$e(this,"actions",{onChange:t=>{let{onChange:n,compare:o,mode:i,value:l}=this.state.dataRef.current;return H(i,{0:()=>n?.(t),1:()=>{let c=l.slice(),x=c.findIndex(m=>o(m,t));return x===-1?c.push(t):c.splice(x,1),n?.(c)}})},registerOption:fe(()=>{let t=[],n=new Set;return[(o,i)=>{n.has(i)||(n.add(i),t.push({id:o,dataRef:i}))},()=>(n.clear(),this.send({type:5,options:t.splice(0)}))]}),unregisterOption:fe(()=>{let t=[];return[n=>t.push(n),()=>{this.send({type:6,options:t.splice(0)})}]}),goToOption:fe(()=>{let t=null;return[(n,o)=>{t={type:2,...n,trigger:o}},()=>t&&this.send(t)]}),closeListbox:()=>{this.send({type:1})},openListbox:t=>{this.send({type:0,focus:t})},selectActiveOption:()=>{if(this.state.activeOptionIndex!==null){let{dataRef:t,id:n}=this.state.options[this.state.activeOptionIndex];this.actions.onChange(t.current.value),this.send({type:2,focus:g.Specific,id:n})}},selectOption:t=>{let n=this.state.options.find(o=>o.id===t);n&&this.actions.onChange(n.dataRef.current.value)},search:t=>{this.send({type:3,value:t})},clearSearch:()=>{this.send({type:4})},setButtonElement:t=>{this.send({type:7,element:t})},setOptionsElement:t=>{this.send({type:8,element:t})}}),$e(this,"selectors",{activeDescendantId(t){var n;let o=t.activeOptionIndex,i=t.options;return o===null||(n=i[o])==null?void 0:n.id},isActive(t,n){var o;let i=t.activeOptionIndex,l=t.options;return i!==null?((o=l[i])==null?void 0:o.id)===n:!1},shouldScrollIntoView(t,n){return t.__demoMode||t.listboxState!==0||t.activationTrigger===0?!1:this.isActive(t,n)}}),this.on(5,()=>{requestAnimationFrame(()=>{this.send({type:9})})});{let t=this.state.id,n=Te.get(null);this.disposables.add(n.on(Et.Push,o=>{!n.selectors.isTop(o,t)&&this.state.listboxState===0&&this.actions.closeListbox()})),this.on(0,()=>n.actions.push(t)),this.on(1,()=>n.actions.pop(t))}}static new({id:s,__demoMode:t=!1}){return new be({id:s,dataRef:{current:{}},listboxState:t?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,buttonElement:null,optionsElement:null,pendingShouldSort:!1,pendingFocus:{focus:g.Nothing},__demoMode:t})}reduce(s,t){return H(t.type,qt,s,t)}}const De=p.createContext(null);function he(e){let s=p.useContext(De);if(s===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Le),t}return s}function Le({id:e,__demoMode:s=!1}){let t=p.useMemo(()=>be.new({id:e,__demoMode:s}),[]);return jt(()=>t.dispose()),t}let re=p.createContext(null);re.displayName="ListboxDataContext";function J(e){let s=p.useContext(re);if(s===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,J),t}return s}let Wt=p.Fragment;function Xt(e,s){let t=p.useId(),n=Mt(),{value:o,defaultValue:i,form:l,name:c,onChange:x,by:m,invalid:u=!1,disabled:f=n||!1,horizontal:d=!1,multiple:r=!1,__demoMode:y=!1,...C}=e;const I=d?"horizontal":"vertical";let B=Y(s),P=yt(i),[S=r?[]:void 0,j]=Ot(o,x,P),$=Le({id:t,__demoMode:y}),A=p.useRef({static:!1,hold:!1}),z=p.useRef(new Map),D=vt(m),U=p.useCallback(T=>H(b.mode,{[M.Multi]:()=>S.some(q=>D(q,T)),[M.Single]:()=>D(S,T)}),[S]),b=p.useMemo(()=>({value:S,disabled:f,invalid:u,mode:r?M.Multi:M.Single,orientation:I,onChange:j,compare:D,isSelected:U,optionsPropsRef:A,listRef:z}),[S,f,u,r,I,j,D,U,A,z]);se(()=>{$.state.dataRef.current=b},[b]);let k=L($,T=>T.listboxState),Q=Te.get(null),V=L(Q,p.useCallback(T=>Q.selectors.isTop(T,t),[Q,t])),[F,h]=L($,T=>[T.buttonElement,T.optionsElement]);Dt(V,[F,h],(T,q)=>{$.send({type:Ne.CloseListbox}),Pt(q,At.Loose)||(T.preventDefault(),F?.focus())});let _=p.useMemo(()=>({open:k===O.Open,disabled:f,invalid:u,value:S}),[k,f,u,S]),[ae,le]=St({inherit:!0}),ue={ref:B},ee=p.useCallback(()=>{if(P!==void 0)return j?.(P)},[j,P]),ce=Z();return R.createElement(le,{value:ae,props:{htmlFor:F?.id},slot:{open:k===O.Open,disabled:f}},R.createElement(xt,null,R.createElement(De.Provider,{value:$},R.createElement(re.Provider,{value:b},R.createElement(Ze,{value:H(k,{[O.Open]:ie.Open,[O.Closed]:ie.Closed})},c!=null&&S!=null&&R.createElement(wt,{disabled:f,data:{[c]:S},form:l,onReset:ee}),ce({ourProps:ue,theirProps:C,slot:_,defaultTag:Wt,name:"Listbox"}))))))}let Yt="button";function Zt(e,s){let t=p.useId(),n=ht(),o=J("Listbox.Button"),i=he("Listbox.Button"),{id:l=n||`headlessui-listbox-button-${t}`,disabled:c=o.disabled||!1,autoFocus:x=!1,...m}=e,u=Y(s,rt(),i.actions.setButtonElement),f=at(),[d,r,y]=L(i,h=>[h.listboxState,h.buttonElement,h.optionsElement]),C=d===O.Open;lt(C,{trigger:r,action:p.useCallback(h=>{if(r!=null&&r.contains(h.target))return oe.Ignore;let _=h.target.closest('[role="option"]:not([data-disabled])');return Ie(_)?oe.Select(_):y!=null&&y.contains(h.target)?oe.Ignore:oe.Close},[r,y]),close:i.actions.closeListbox,select:i.actions.selectActiveOption});let I=N(h=>{switch(h.key){case w.Enter:$t(h.currentTarget);break;case w.Space:case w.ArrowDown:h.preventDefault(),i.actions.openListbox({focus:o.value?g.Nothing:g.First});break;case w.ArrowUp:h.preventDefault(),i.actions.openListbox({focus:o.value?g.Nothing:g.Last});break}}),B=N(h=>{switch(h.key){case w.Space:h.preventDefault();break}}),P=N(h=>{var _;if(h.button===0){if(Je(h.currentTarget))return h.preventDefault();i.state.listboxState===O.Open?(W.flushSync(()=>i.actions.closeListbox()),(_=i.state.buttonElement)==null||_.focus({preventScroll:!0})):(h.preventDefault(),i.actions.openListbox({focus:g.Nothing}))}}),S=N(h=>h.preventDefault()),j=gt([l]),$=Ft(),{isFocusVisible:A,focusProps:z}=Ue({autoFocus:x}),{isHovered:D,hoverProps:U}=Qe({isDisabled:c}),{pressed:b,pressProps:k}=Ve({disabled:c}),Q=p.useMemo(()=>({open:d===O.Open,active:b||d===O.Open,disabled:c,invalid:o.invalid,value:o.value,hover:D,focus:A,autofocus:x}),[d,o.value,c,D,A,b,o.invalid,x]),V=L(i,h=>h.listboxState===O.Open),F=je(f(),{ref:u,id:l,type:Ke(e,r),"aria-haspopup":"listbox","aria-controls":y?.id,"aria-expanded":V,"aria-labelledby":j,"aria-describedby":$,disabled:c||void 0,autoFocus:x,onKeyDown:I,onKeyUp:B,onKeyPress:S,onPointerDown:P},z,U,k);return Z()({ourProps:F,theirProps:m,slot:Q,defaultTag:Yt,name:"Listbox.Button"})}let Pe=p.createContext(!1),Jt="div",en=ge.RenderStrategy|ge.Static;function tn(e,s){let t=p.useId(),{id:n=`headlessui-listbox-options-${t}`,anchor:o,portal:i=!1,modal:l=!0,transition:c=!1,...x}=e,m=ut(o),[u,f]=p.useState(null);m&&(i=!0);let d=J("Listbox.Options"),r=he("Listbox.Options"),[y,C,I,B]=L(r,v=>[v.listboxState,v.buttonElement,v.optionsElement,v.__demoMode]),P=ye(C),S=ye(I),j=Ge(),[$,A]=He(c,u,j!==null?(j&ie.Open)===ie.Open:y===O.Open);Tt($,C,r.actions.closeListbox);let z=B?!1:l&&y===O.Open;Rt(z,S);let D=B?!1:l&&y===O.Open;Ct(D,{allowed:p.useCallback(()=>[C,I],[C,I])});let U=y!==O.Open,b=Qt(U,C)?!1:$,k=$&&y===O.Closed,Q=ct(k,d.value),V=N(v=>d.compare(Q,v)),F=L(r,v=>{var E;if(m==null||!((E=m?.to)!=null&&E.includes("selection")))return null;let K=v.options.findIndex(de=>V(de.dataRef.current.value));return K===-1&&(K=0),K}),h=(()=>{if(m==null)return;if(F===null)return{...m,inner:void 0};let v=Array.from(d.listRef.current.values());return{...m,inner:{listRef:{current:v},index:F}}})(),[_,ae]=dt(h),le=pt(),ue=Y(s,m?_:null,r.actions.setOptionsElement,f),ee=qe();p.useEffect(()=>{var v;let E=I;E&&y===O.Open&&E!==((v=We(E))==null?void 0:v.activeElement)&&E?.focus({preventScroll:!0})},[y,I]);let ce=N(v=>{var E,K;switch(ee.dispose(),v.key){case w.Space:if(r.state.searchQuery!=="")return v.preventDefault(),v.stopPropagation(),r.actions.search(v.key);case w.Enter:if(v.preventDefault(),v.stopPropagation(),r.state.activeOptionIndex!==null){let{dataRef:de}=r.state.options[r.state.activeOptionIndex];r.actions.onChange(de.current.value)}d.mode===M.Single&&(W.flushSync(()=>r.actions.closeListbox()),(E=r.state.buttonElement)==null||E.focus({preventScroll:!0}));break;case H(d.orientation,{vertical:w.ArrowDown,horizontal:w.ArrowRight}):return v.preventDefault(),v.stopPropagation(),r.actions.goToOption({focus:g.Next});case H(d.orientation,{vertical:w.ArrowUp,horizontal:w.ArrowLeft}):return v.preventDefault(),v.stopPropagation(),r.actions.goToOption({focus:g.Previous});case w.Home:case w.PageUp:return v.preventDefault(),v.stopPropagation(),r.actions.goToOption({focus:g.First});case w.End:case w.PageDown:return v.preventDefault(),v.stopPropagation(),r.actions.goToOption({focus:g.Last});case w.Escape:v.preventDefault(),v.stopPropagation(),W.flushSync(()=>r.actions.closeListbox()),(K=r.state.buttonElement)==null||K.focus({preventScroll:!0});return;case w.Tab:v.preventDefault(),v.stopPropagation(),W.flushSync(()=>r.actions.closeListbox()),Lt(r.state.buttonElement,v.shiftKey?Oe.Previous:Oe.Next);break;default:v.key.length===1&&(r.actions.search(v.key),ee.setTimeout(()=>r.actions.clearSearch(),350));break}}),T=L(r,v=>{var E;return(E=v.buttonElement)==null?void 0:E.id}),q=p.useMemo(()=>({open:y===O.Open}),[y]),_e=je(m?le():{},{id:n,ref:ue,"aria-activedescendant":L(r,r.selectors.activeDescendantId),"aria-multiselectable":d.mode===M.Multi?!0:void 0,"aria-labelledby":T,"aria-orientation":d.orientation,onKeyDown:ce,role:"listbox",tabIndex:y===O.Open?0:void 0,style:{...x.style,...ae,"--button-width":ft(C,!0).width},...Xe(A)}),Be=Z(),ze=p.useMemo(()=>d.mode===M.Multi?d:{...d,isSelected:V},[d,V]);return R.createElement(Nt,{enabled:i?e.static||$:!1,ownerDocument:P},R.createElement(re.Provider,{value:ze},Be({ourProps:_e,theirProps:x,slot:q,defaultTag:Jt,features:en,visible:b,name:"Listbox.Options"})))}let nn="div";function on(e,s){let t=p.useId(),{id:n=`headlessui-listbox-option-${t}`,disabled:o=!1,value:i,...l}=e,c=p.useContext(Pe)===!0,x=J("Listbox.Option"),m=he("Listbox.Option"),u=L(m,b=>m.selectors.isActive(b,n)),f=x.isSelected(i),d=p.useRef(null),r=Kt(d),y=Ye({disabled:o,value:i,domRef:d,get textValue(){return r()}}),C=Y(s,d,b=>{b?x.listRef.current.set(n,b):x.listRef.current.delete(n)}),I=L(m,b=>m.selectors.shouldScrollIntoView(b,n));se(()=>{if(I)return et().requestAnimationFrame(()=>{var b,k;(k=(b=d.current)==null?void 0:b.scrollIntoView)==null||k.call(b,{block:"nearest"})})},[I,d]),se(()=>{if(!c)return m.actions.registerOption(n,y),()=>m.actions.unregisterOption(n)},[y,n,c]);let B=N(b=>{var k;if(o)return b.preventDefault();m.actions.onChange(i),x.mode===M.Single&&(W.flushSync(()=>m.actions.closeListbox()),(k=m.state.buttonElement)==null||k.focus({preventScroll:!0}))}),P=N(()=>{if(o)return m.actions.goToOption({focus:g.Nothing});m.actions.goToOption({focus:g.Specific,id:n})}),S=mt(),j=N(b=>{S.update(b),!o&&(u||m.actions.goToOption({focus:g.Specific,id:n},ve.Pointer))}),$=N(b=>{S.wasMoved(b)&&(o||u||m.actions.goToOption({focus:g.Specific,id:n},ve.Pointer))}),A=N(b=>{S.wasMoved(b)&&(o||u&&m.actions.goToOption({focus:g.Nothing}))}),z=p.useMemo(()=>({active:u,focus:u,selected:f,disabled:o,selectedOption:f&&c}),[u,f,o,c]),D=c?{}:{id:n,ref:C,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":f,disabled:void 0,onClick:B,onFocus:P,onPointerEnter:j,onMouseEnter:j,onPointerMove:$,onMouseMove:$,onPointerLeave:A,onMouseLeave:A},U=Z();return!f&&c?null:U({ourProps:D,theirProps:l,slot:z,defaultTag:nn,name:"Listbox.Option"})}let sn=p.Fragment;function rn(e,s){let{options:t,placeholder:n,...o}=e,i={ref:Y(s)},l=J("ListboxSelectedOption"),c=p.useMemo(()=>({}),[]),x=l.value===void 0||l.value===null||l.mode===M.Multi&&Array.isArray(l.value)&&l.value.length===0,m=Z();return R.createElement(Pe.Provider,{value:!0},m({ourProps:i,theirProps:{...o,children:R.createElement(R.Fragment,null,n&&x?n:t)},slot:c,defaultTag:sn,name:"ListboxSelectedOption"}))}let an=X(Xt),Ae=X(Zt),ln=bt,Fe=X(tn),Me=X(on),un=X(rn),cn=Object.assign(an,{Button:Ae,Label:ln,Options:Fe,Option:Me,SelectedOption:un});const G=e=>{const s=e.toLowerCase(),t=60*60,n=24*t,o={h:t,d:n,w:7*n,m:31*n,y:356*n},i=/^(\d+)([hdwmy])$/.exec(s);if(!i)throw new Error(`invalid timeStr: ${s}`);const l=parseInt(i[1],10),c=i[2];return l*o[c]};function dn({scope:e,value:s,onChange:t}){return a.jsxs("div",{className:"flex flex-row items-center justify-between border-b py-1 mx-3 border-gray-200",children:[a.jsx("div",{className:"font-mono",children:e}),a.jsx(ot,{enabled:s,onChange:n=>t(e,n)})]})}const Ee=[{label:"never",value:null},{label:"one hour",value:G("1h")},{label:"one day",value:G("1d")},{label:"one week",value:G("1w")},{label:"one month",value:G("1m")},{label:"six months",value:G("6m")},{label:"one year",value:G("1y")}];function pn({show:e,scopes:s,onClose:t,onSubmit:n}){const[o,i]=p.useState(s.reduce((u,f)=>(u[f]=!0,u),{})),[l,c]=p.useState(Ee[0]),x=()=>{const u=Object.keys(o).filter(f=>o[f]);n({scopes:u,lifetime:l.value}),t()},m=(u,f)=>{const d={...o};d[u]=f,i(d)};return a.jsx(st,{show:e,onClose:t,children:a.jsxs(Re,{className:"w-full max-w-lg p-6 overflow-hidden text-left align-middle shadow-xl transform rounded-2xl transition-all border bg-gray-50 border-gray-300",children:[a.jsx(Ce,{as:"h2",className:"pb-3 text-2xl font-extrabold text-gray-800 leading-6",children:"New Access Token"}),a.jsxs("p",{className:"pb-3",children:["This token can be used by command line tools to perform actions in"," ",a.jsx("span",{className:"text-blue font-bold",children:"dabih"})]}),a.jsx("h3",{className:"text-xl font-extrabold",children:"Configure Scopes"}),Object.keys(o).map(u=>a.jsx(dn,{scope:u,value:o[u],onChange:m},u)),a.jsx("h3",{className:"text-xl py-2 font-extrabold",children:"Token Expiry"}),a.jsxs("div",{className:"h-72",children:[a.jsx(cn,{value:l,onChange:c,children:a.jsxs("div",{className:"relative mt-1",children:[a.jsxs(Ae,{className:"relative w-full cursor-default rounded-lg py-2 pl-3 pr-10 text-left border focus:outline-hidden sm:text-sm border-gray-200",children:[a.jsx("span",{className:"block truncate",children:l.label}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:a.jsx(xe,{})})]}),a.jsx(Fe,{className:"mt-1 w-full overflow-auto rounded-md bg-white py-1 text-base border border-gray-200 sm:text-sm",children:Ee.map(u=>a.jsx(Me,{value:u,className:"relative cursor-default select-none py-2 pl-10 text-gray-800 data-focus:bg-blue data-focus:text-white",children:a.jsx("span",{className:"block truncate",children:u.label})},u.value))})]})}),a.jsx("h3",{className:"text-xl py-2 font-extrabold",children:"Help"}),a.jsx("p",{children:"Scopes are permissions for the dabih API."}),a.jsxs("p",{className:"pb-4",children:["See the",a.jsx("a",{target:"_blank",className:"text-blue hover:underline font-semibold mx-1",href:"/docs/api",children:"API Documentation"}),"for help on scopes."]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("button",{type:"button",className:"mx-3 px-2 py-1 text-lg font-bold text-gray-100 bg-blue hover:text-white rounded-md",onClick:x,children:"Generate"}),a.jsx("button",{type:"button",className:"mx-3 px-2 py-1 text-lg text-white bg-gray-400 hover:text-white rounded-md",onClick:t,children:"Cancel"})]})]})})}function fn({token:e,onClose:s}){const t=()=>navigator.clipboard.writeText(e).catch(console.error);return a.jsx(it,{show:!!e,children:a.jsxs(Re,{className:"w-full max-w-2xl p-6 overflow-hidden text-left align-middle shadow-xl transform rounded-2xl transition-all border bg-gray-50 border-gray-300",children:[a.jsx(Ce,{as:"h2",className:"pb-3 text-2xl font-extrabold text-gray-800 leading-6",children:"New API Access Token"}),a.jsx("p",{className:"pb-3",children:"This token can be used by command line tools to access dabih functions"}),a.jsxs("p",{children:["Make sure to copy this token"," ",a.jsx("strong",{children:"before"})," ","closing this window."]}),a.jsxs("div",{className:"flex flex-row items-center mt-2",children:[a.jsx("div",{className:"text-center",children:a.jsx("input",{size:46,className:"p-2 border border-gray-400 text-gray-700 font-mono text-lg rounded-sm text-center",type:"text",readOnly:!0,value:e??""})}),a.jsx("div",{className:"pl-1",children:a.jsx("button",{type:"button",className:"px-2 py-1 border border-gray-700 text-gray-600 rounded-lg","aria-label":"Copy Token",onClick:t,children:a.jsx(_t,{size:32})})})]}),a.jsxs("p",{className:"text-lg",children:["This token can",a.jsxs("span",{className:"font-bold text-red",children:[" ","no longer be accessed"," "]}),"later, copy it now."]}),a.jsx("div",{className:"text-right",children:a.jsx("button",{type:"button",className:"mx-3 px-2 py-1 text-lg text-white bg-blue rounded-lg",onClick:s,children:"Done"})})]})})}function jn(){const{user:e}=tt(),[s,t]=p.useState([]),[n,o]=p.useState(!1),[i,l]=p.useState(null),c=e?.scope.split(" ")||[],x=p.useCallback(async()=>{const{data:f,error:d}=await pe.token.list();if(!f||d){console.error(d);return}t(f)},[]),m=async f=>{const{data:d,error:r}=await pe.token.add(f);if(r){console.error(r);return}l(d.value),await x()},u=async f=>{await pe.token.remove(f),await x()};return p.useEffect(()=>{x().catch(console.error)},[x]),a.jsxs("div",{children:[a.jsx(pn,{show:n,scopes:c,onClose:()=>o(!1),onSubmit:f=>void m(f).catch(console.error)}),a.jsx(fn,{token:i,onClose:()=>l(null)}),s.map(f=>a.jsx(nt,{data:f,onRemove:()=>void u(f.id)},f.value)),a.jsx("div",{hidden:s.length>0,className:"p-2 m-2 border italic text-gray-500 rounded-lg text-center border-gray-200",children:"You have no access tokens."}),a.jsxs("button",{className:"m-1 rounded-sm text-white font-semibold bg-blue px-2 py-1 inline-flex items-center",type:"button",onClick:()=>o(!0),children:[a.jsx(Bt,{size:24,className:"mr-1"}),"Generate an new Token"]})]})}export{jn as default};
