import{r as u,j as e,F as h,B as x,a as f}from"./index-D81WwACb.js";import{I as l}from"./base-CJy2W7aR.js";import{L as p}from"./LocalDate-BIT0VlXU.js";import a from"./ListItem-DNdkSLNh.js";import g from"./Icon-BT5RBuHz.js";import{C as y}from"./copy-BIumn5ZQ.js";import"./Spinner-Br-E1HIG.js";import"./folder-BHZ6CSSP.js";import"./trash-2-DYQ5HbAl.js";import"./file-D2EBNl1U.js";const b=s=>{switch(s){case l.DIRECTORY:return"Folder";case l.FILE:return"File";case l.TRASH:return"Bin";case l.UPLOAD:return"Upload";default:return"Unknown"}};function N({inode:s}){const{data:t}=s;if(!t)return null;const i=parseInt(t.size,10),{hash:c,uid:n,fileName:o,filePath:r}=t,d=()=>{navigator.clipboard.writeText(c).catch(console.error)};return e.jsxs(e.Fragment,{children:[e.jsxs(a,{label:"Size",children:[e.jsx(x,{value:i})," ","(",e.jsx(x,{binary:!0,value:i}),")"]}),e.jsx(a,{label:"Storage ID",children:e.jsx("span",{className:"font-mono text-sm",children:n})}),e.jsx(a,{label:"Checksum (SHA-256)",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("textarea",{wrap:"hard",className:"break-all font-mono text-xs bg-gray-100 rounded-lg px-2 py-1",value:c??"",cols:20,rows:2,readOnly:!0}),e.jsx("button",{type:"button",className:"ml-2 px-2 py-1 border border-gray-700 text-gray-600 rounded-lg hover:bg-gray-200","aria-label":"Copy Hash",onClick:d,children:e.jsx(y,{size:18})})]})}),e.jsx(a,{hidden:o===s.name,label:"Original Name",children:e.jsx(h,{fileName:o})}),e.jsx(a,{hidden:!r,label:"Original Path",children:e.jsx(h,{fileName:r??""})})]})}function A({inode:s}){const[t,i]=u.useState([]),{name:c,type:n,mnemonic:o}=s,r=n===l.DIRECTORY||n===l.TRASH;u.useEffect(()=>{(async()=>{if(!r)return;const{data:m}=await f.fs.listFiles(s.mnemonic);m&&i(m)})().catch(console.error)},[s,r]);const d=u.useMemo(()=>t.reduce((j,m)=>j+parseInt(m.data.size,10),0),[t]);return e.jsx("div",{className:"px-3",children:e.jsxs("dl",{className:"divide-y divide-gray-200",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-3 py-2 items-center",children:[e.jsx("dt",{className:"text-sm font-medium leading-6 flex justify-center",children:e.jsx(g,{inode:s})}),e.jsxs("dd",{className:"col-span-2 leading-6",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-blue",children:b(n)}),e.jsx(h,{fileName:c})]})]}),e.jsx(a,{label:"ID",children:e.jsx("span",{className:"font-mono",children:o})}),e.jsx(a,{hidden:!r,label:"Files",children:t.length}),e.jsxs(a,{hidden:!r,label:"Total Size",children:[e.jsx(x,{value:d})," ","(",e.jsx(x,{binary:!0,value:d}),")"]}),e.jsx(N,{inode:s}),e.jsx(a,{label:"Created",children:e.jsx("span",{className:"text-sm text-gray-700",children:e.jsx(p,{showTime:!0,value:s.createdAt})})}),e.jsx(a,{label:"Last Modified",children:e.jsx("span",{className:"text-sm text-gray-700",children:e.jsx(p,{showTime:!0,value:s.updatedAt})})})]})})}export{A as default};
