import{r as f,R as z,P as fe,o as C,l as Ie,n as X,e as Je,f as se,h as ce,y as me,p as Xe,$ as Ae,i as je,k as xe,m as de,q as Ye,w as Ze,s as et,t as tt,x as nt,v as he,z as ot,A as st,C as it,O as Te,D as L,E as lt,G as rt,j as N,U as at,H as ut}from"./index-D81WwACb.js";import{u as ct}from"./Context-CTVvxjOO.js";import{r as te}from"./index-BLzTb_JD.js";import{c as _,f as Ce,F as dt,k as pt,g as ae,y as ft,R as ht,T as mt,d as we,l as Me,a as vt,u as gt,b as bt,A as xt}from"./calculate-active-index-PrioCODW.js";import{V as Ot,u as yt,N as Oe,l as St,T as Et,Q as It,j as Tt}from"./label-DeZCyrFp.js";import{E as Ct,a as wt,x as Ne,k as Mt,P as Rt,c as $t,S as k,n as ge,m as Re,p as Pt,f as zt,y as _t,b as kt,d as Ft,e as $e,g as Dt}from"./portal-CrkO56Jr.js";import{U as At,a as jt}from"./description-CHTAMN5B.js";import"./core.esm-DQkDfR73.js";import"./copy-BIumn5ZQ.js";import"./trash-2-DYQ5HbAl.js";function be(){return be=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},be.apply(this,arguments)}function Nt(t,i){if(t==null)return{};var e=Lt(t,i),o,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)o=s[n],!(i.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(e[o]=t[o])}return e}function Lt(t,i){if(t==null)return{};var e={},o=Object.keys(t),n,s;for(s=0;s<o.length;s++)n=o[s],!(i.indexOf(n)>=0)&&(e[n]=t[n]);return e}var ye=f.forwardRef(function(t,i){var e=t.color,o=e===void 0?"currentColor":e,n=t.size,s=n===void 0?24:n,l=Nt(t,["color","size"]);return z.createElement("svg",be({ref:i,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),z.createElement("polyline",{points:"7 13 12 18 17 13"}),z.createElement("polyline",{points:"7 6 12 11 17 6"}))});ye.propTypes={color:fe.string,size:fe.oneOfType([fe.string,fe.number])};ye.displayName="ChevronsDown";function oe(t,i,e){let o=e.initialDeps??[],n;function s(){var l,r,d,u;let c;e.key&&((l=e.debug)!=null&&l.call(e))&&(c=Date.now());const v=t();if(!(v.length!==o.length||v.some((a,b)=>o[b]!==a)))return n;o=v;let h;if(e.key&&((r=e.debug)!=null&&r.call(e))&&(h=Date.now()),n=i(...v),e.key&&((d=e.debug)!=null&&d.call(e))){const a=Math.round((Date.now()-c)*100)/100,b=Math.round((Date.now()-h)*100)/100,O=b/16,F=(R,w)=>{for(R=String(R);R.length<w;)R=" "+R;return R};console.info(`%câ± ${F(b,5)} /${F(a,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*O,120))}deg 100% 31%);`,e?.key)}return(u=e?.onChange)==null||u.call(e,n),n}return s.updateDeps=l=>{o=l},s}function Pe(t,i){if(t===void 0)throw new Error("Unexpected undefined");return t}const Vt=(t,i)=>Math.abs(t-i)<=1,Wt=(t,i,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>i.apply(this,n),e)}},ze=t=>{const{offsetWidth:i,offsetHeight:e}=t;return{width:i,height:e}},Bt=t=>t,Ut=t=>{const i=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=i;n<=e;n++)o.push(n);return o},Ht=(t,i)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=l=>{const{width:r,height:d}=l;i({width:Math.round(r),height:Math.round(d)})};if(n(ze(e)),!o.ResizeObserver)return()=>{};const s=new o.ResizeObserver(l=>{const r=()=>{const d=l[0];if(d?.borderBoxSize){const u=d.borderBoxSize[0];if(u){n({width:u.inlineSize,height:u.blockSize});return}}n(ze(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()});return s.observe(e,{box:"border-box"}),()=>{s.unobserve(e)}},_e={passive:!0},ke=typeof window>"u"?!0:"onscrollend"in window,qt=(t,i)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const s=t.options.useScrollendEvent&&ke?()=>{}:Wt(o,()=>{i(n,!1)},t.options.isScrollingResetDelay),l=c=>()=>{const{horizontal:v,isRtl:m}=t.options;n=v?e.scrollLeft*(m&&-1||1):e.scrollTop,s(),i(n,c)},r=l(!0),d=l(!1);d(),e.addEventListener("scroll",r,_e);const u=t.options.useScrollendEvent&&ke;return u&&e.addEventListener("scrollend",d,_e),()=>{e.removeEventListener("scroll",r),u&&e.removeEventListener("scrollend",d)}},Kt=(t,i,e)=>{if(i?.borderBoxSize){const o=i.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},Gt=(t,{adjustments:i=0,behavior:e},o)=>{var n,s;const l=t+i;(s=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||s.call(n,{[o.options.horizontal?"left":"top"]:l,behavior:e})};class Qt{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(s=>{const l=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var s;return(s=o())==null?void 0:s.observe(n,{box:"border-box"})},unobserve:n=>{var s;return(s=o())==null?void 0:s.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Bt,rangeExtractor:Ut,onChange:()=>{},measureElement:Kt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=oe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,s=new Map;for(let l=o-1;l>=0;l--){const r=e[l];if(n.has(r.lane))continue;const d=s.get(r.lane);if(d==null||r.end>d.end?s.set(r.lane,r):r.end<d.end&&n.set(r.lane,!0),n.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((l,r)=>l.end===r.end?l.index-r.index:l.end-r.end)[0]:void 0},this.getMeasurementOptions=oe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,o,n,s,l)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:s,enabled:l}),{key:!1}),this.getMeasurements=oe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:s,enabled:l},r)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const d=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,d);for(let c=d;c<e;c++){const v=s(c),m=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),h=m?m.end+this.options.gap:o+n,a=r.get(v),b=typeof a=="number"?a:this.options.estimateSize(c),O=h+b,F=m?m.lane:c%this.options.lanes;u[c]={index:c,start:h,size:b,end:O,key:v,lane:F}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=oe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,s)=>this.range=e.length>0&&o>0?Jt({measurements:e,outerSize:o,scrollOffset:n,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=oe(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,s,l)=>s===null||l===null?[]:e({startIndex:s,endIndex:l,overscan:o,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),s=this.measurementsCache[n];if(!s)return;const l=s.key,r=this.elementsCache.get(l);r!==e&&(r&&this.observer.unobserve(r),this.observer.observe(e),this.elementsCache.set(l,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const s=this.itemSizeCache.get(n.key)??n.size,l=o-s;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,l,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=oe(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let s=0,l=e.length;s<l;s++){const r=e[s],d=o[r];n.push(d)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return Pe(o[Le(0,o.length-1,n=>Pe(o[n]).start,e)])},this.getOffsetForAlignment=(e,o,n=0)=>{const s=this.getSize(),l=this.getScrollOffset();o==="auto"&&(o=e>=l+s?"end":"start"),o==="center"?e+=(n-s)/2:o==="end"&&(e-=s);const r=this.getTotalSize()-s;return Math.max(Math.min(r,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const s=this.getSize(),l=this.getScrollOffset();if(o==="auto")if(n.end>=l+s-this.options.scrollPaddingEnd)o="end";else if(n.start<=l+this.options.scrollPaddingStart)o="start";else return[l,o];const r=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(e,o);if(!s)return;const[l,r]=s;this._scrollToOffset(l,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const u=this.getOffsetForIndex(e,r);if(!u)return;const[c]=u,v=this.getScrollOffset();Vt(c,v)||this.scrollToIndex(e,{align:r,behavior:n})}else this.scrollToIndex(e,{align:r,behavior:n})}))},this.scrollBy=(e,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const s=Array(this.options.lanes).fill(null);let l=o.length-1;for(;l>=0&&s.some(r=>r===null);){const r=o[l];s[r.lane]===null&&(s[r.lane]=r.end),l--}n=Math.max(...s.filter(r=>r!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const Le=(t,i,e,o)=>{for(;t<=i;){const n=(t+i)/2|0,s=e(n);if(s<o)t=n+1;else if(s>o)i=n-1;else return n}return t>0?t-1:0};function Jt({measurements:t,outerSize:i,scrollOffset:e,lanes:o}){const n=t.length-1,s=d=>t[d].start;if(t.length<=o)return{startIndex:0,endIndex:n};let l=Le(0,n,s,e),r=l;if(o===1)for(;r<n&&t[r].end<e+i;)r++;else if(o>1){const d=Array(o).fill(0);for(;r<n&&d.some(c=>c<e+i);){const c=t[r];d[c.lane]=c.end,r++}const u=Array(o).fill(e+i);for(;l>=0&&u.some(c=>c>=e);){const c=t[l];u[c.lane]=c.start,l--}l=Math.max(0,l-l%o),r=Math.min(n,r+(o-1-r%o))}return{startIndex:l,endIndex:r}}const Fe=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Xt(t){const i=f.useReducer(()=>({}),{})[1],e={...t,onChange:(n,s)=>{var l;s?te.flushSync(i):i(),(l=t.onChange)==null||l.call(t,n,s)}},[o]=f.useState(()=>new Qt(e));return o.setOptions(e),Fe(()=>o._didMount(),[]),Fe(()=>o._willUpdate()),o}function Yt(t){return Xt({observeElementRect:Ht,observeElementOffset:qt,scrollToFn:Gt,...t})}function Ve(t){let i=f.useRef({value:"",selectionStart:null,selectionEnd:null});return Ct(t,"blur",e=>{let o=e.target;Ie(o)&&(i.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),C(()=>{if(document.activeElement!==t&&Ie(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==i.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=i.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function Zt(t,{container:i,accept:e,walk:o}){let n=f.useRef(e),s=f.useRef(o);f.useEffect(()=>{n.current=e,s.current=o},[e,o]),X(()=>{if(!i||!t)return;let l=Je(i);if(!l)return;let r=n.current,d=s.current,u=Object.assign(v=>r(v),{acceptNode:r}),c=l.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,u,!1);for(;c.nextNode();)d(c.currentNode)},[i,t,n,s])}var Se=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(Se||{}),en=Object.defineProperty,tn=(t,i,e)=>i in t?en(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e,De=(t,i,e)=>(tn(t,typeof i!="symbol"?i+"":i,e),e),x=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(x||{}),H=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(H||{}),J=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(J||{}),We=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t))(We||{});function ve(t,i=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=i(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((l,r)=>l.dataRef.current.order-r.dataRef.current.order):Rt(o,l=>l.dataRef.current.domRef.current),s=e?n.indexOf(e):null;return s===-1&&(s=null),{options:n,activeOptionIndex:s}}let nn={1(t){var i;return(i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(t){var i,e;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1}}return{...t,comboboxState:0,__demoMode:!1}},3(t,i){return t.isTyping===i.isTyping?t:{...t,isTyping:i.isTyping}},2(t,i){var e,o,n,s;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:u,disabled:c}=t.virtual,v=i.focus===_.Specific?i.idx:Ce(i,{resolveItems:()=>u,resolveActiveIndex:()=>{var h,a;return(a=(h=t.activeOptionIndex)!=null?h:u.findIndex(b=>!c(b)))!=null?a:null},resolveDisabled:c,resolveId(){throw new Error("Function not implemented.")}}),m=(n=i.trigger)!=null?n:2;return t.activeOptionIndex===v&&t.activationTrigger===m?t:{...t,activeOptionIndex:v,activationTrigger:m,isTyping:!1,__demoMode:!1}}let l=ve(t);if(l.activeOptionIndex===null){let u=l.options.findIndex(c=>!c.dataRef.current.disabled);u!==-1&&(l.activeOptionIndex=u)}let r=i.focus===_.Specific?i.idx:Ce(i,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled}),d=(s=i.trigger)!=null?s:2;return t.activeOptionIndex===r&&t.activationTrigger===d?t:{...t,...l,isTyping:!1,activeOptionIndex:r,activationTrigger:d,__demoMode:!1}},4:(t,i)=>{var e,o,n,s;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,i.payload]};let l=i.payload,r=ve(t,u=>(u.push(l),u));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,i.payload.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(l));let d={...t,...r,activationTrigger:2};return(s=t.dataRef.current)!=null&&s.__demoMode&&t.dataRef.current.value===void 0&&(d.activeOptionIndex=0),d},5:(t,i)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==i.id)};let o=ve(t,n=>{let s=n.findIndex(l=>l.id===i.id);return s!==-1&&n.splice(s,1),n});return{...t,...o,activationTrigger:2}},6:(t,i)=>t.defaultToFirstOption===i.value?t:{...t,defaultToFirstOption:i.value},7:(t,i)=>t.activationTrigger===i.trigger?t:{...t,activationTrigger:i.trigger},8:(t,i)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:i.options,disabled:(e=i.disabled)!=null?e:()=>!1}};if(t.virtual.options===i.options&&t.virtual.disabled===i.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let s=i.options.indexOf(t.virtual.options[t.activeOptionIndex]);s!==-1?n=s:n=null}return{...t,activeOptionIndex:n,virtual:{options:i.options,disabled:(o=i.disabled)!=null?o:()=>!1}}},9:(t,i)=>t.inputElement===i.element?t:{...t,inputElement:i.element},10:(t,i)=>t.buttonElement===i.element?t:{...t,buttonElement:i.element},11:(t,i)=>t.optionsElement===i.element?t:{...t,optionsElement:i.element}};class Ee extends wt{constructor(i){super(i),De(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:s,value:l}=this.state.dataRef.current;return se(s,{0:()=>o?.(e),1:()=>{let r=l.slice(),d=r.findIndex(u=>n(u,e));return d===-1?r.push(e):r.splice(d,1),o?.(r)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:_.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),De(this,"selectors",{activeDescendantId:e=>{var o,n;let s=this.selectors.activeOptionIndex(e);if(s!==null)return e.virtual?(n=e.options.find(l=>!l.dataRef.current.disabled&&e.dataRef.current.compare(l.dataRef.current.value,e.virtual.options[s])))==null?void 0:n.id:(o=e.options[s])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:s}=e.virtual,l=n.findIndex(r=>{var d;return!((d=s?.(r))!=null&&d)});if(l!==-1)return l}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let s=this.selectors.activeOptionIndex(e);return s===null?null:e.virtual?e.virtual.options[s??0]:(n=(o=e.options[s])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var s;let l=this.selectors.activeOptionIndex(e);return l===null?!1:e.virtual?l===e.dataRef.current.calculateIndex(o):((s=e.options[l])==null?void 0:s.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n))});{let e=this.state.id,o=Ne.get(null);this.disposables.add(o.on(Mt.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}}static new({id:i,virtual:e=null,__demoMode:o=!1}){var n;return new Ee({id:i,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o})}reduce(i,e){return se(e.type,nn,i,e)}}const Be=f.createContext(null);function pe(t){let i=f.useContext(Be);if(i===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,Ue),e}return i}function Ue({id:t,virtual:i=null,__demoMode:e=!1}){let o=f.useMemo(()=>Ee.new({id:t,virtual:i,__demoMode:e}),[]);return $t(()=>o.dispose()),o}let ue=f.createContext(null);ue.displayName="ComboboxDataContext";function ie(t){let i=f.useContext(ue);if(i===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,ie),e}return i}let He=f.createContext(null);function on(t){let i=pe("VirtualProvider"),e=ie("VirtualProvider"),{options:o}=e.virtual,n=k(i,h=>h.optionsElement),[s,l]=f.useMemo(()=>{let h=n;if(!h)return[0,0];let a=window.getComputedStyle(h);return[parseFloat(a.paddingBlockStart||a.paddingTop),parseFloat(a.paddingBlockEnd||a.paddingBottom)]},[n]),r=Yt({enabled:o.length!==0,scrollPaddingStart:s,scrollPaddingEnd:l,count:o.length,estimateSize(){return 40},getScrollElement(){return i.state.optionsElement},overscan:12}),[d,u]=f.useState(0);X(()=>{u(h=>h+1)},[o]);let c=r.getVirtualItems(),v=k(i,h=>h.activationTrigger===J.Pointer),m=k(i,i.selectors.activeOptionIndex);return c.length===0?null:z.createElement(He.Provider,{value:r},z.createElement("div",{style:{position:"relative",width:"100%",height:`${r.getTotalSize()}px`},ref:h=>{h&&(v||m!==null&&o.length>m&&r.scrollToIndex(m))}},c.map(h=>{var a;return z.createElement(f.Fragment,{key:h.key},z.cloneElement((a=t.children)==null?void 0:a.call(t,{...t.slot,option:o[h.index]}),{key:`${d}-${h.key}`,"data-index":h.index,"aria-setsize":o.length,"aria-posinset":h.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${h.start}px)`,overflowAnchor:"none"}}))})))}let sn=f.Fragment;function ln(t,i){let e=f.useId(),o=jt(),{value:n,defaultValue:s,onChange:l,form:r,name:d,by:u,invalid:c=!1,disabled:v=o||!1,onClose:m,__demoMode:h=!1,multiple:a=!1,immediate:b=!1,virtual:O=null,nullable:F,...R}=t,w=St(s),[$=a?[]:void 0,A]=Et(n,l,w),S=Ue({id:e,virtual:O,__demoMode:h}),V=f.useRef({static:!1,hold:!1}),T=bt(u),j=C(g=>O?u===null?O.options.indexOf(g):O.options.findIndex(P=>T(P,g)):S.state.options.findIndex(P=>T(P.dataRef.current.value,g))),K=f.useCallback(g=>se(D.mode,{[H.Multi]:()=>$.some(P=>T(P,g)),[H.Single]:()=>T($,g)}),[$]),G=k(S,g=>g.virtual),y=C(()=>m?.()),D=f.useMemo(()=>({__demoMode:h,immediate:b,optionsPropsRef:V,value:$,defaultValue:w,disabled:v,invalid:c,mode:a?H.Multi:H.Single,virtual:O?G:null,onChange:A,isSelected:K,calculateIndex:j,compare:T,onClose:y}),[$,w,v,c,a,A,K,h,S,O,G,y]);X(()=>{var g;O&&S.send({type:We.UpdateVirtualConfiguration,options:O.options,disabled:(g=O.disabled)!=null?g:null})},[O,O?.options,O?.disabled]),X(()=>{S.state.dataRef.current=D},[D]);let[W,E,q,ne]=k(S,g=>[g.comboboxState,g.buttonElement,g.inputElement,g.optionsElement]),Y=Ne.get(null),Q=k(Y,f.useCallback(g=>Y.selectors.isTop(g,e),[Y,e]));Ft(Q,[E,q,ne],()=>S.actions.closeCombobox());let le=k(S,S.selectors.activeOptionIndex),Z=k(S,S.selectors.activeOption),re=f.useMemo(()=>({open:W===x.Open,disabled:v,invalid:c,activeIndex:le,activeOption:Z,value:$}),[D,v,$,c,Z,W]),[ee,p]=It(),B=i===null?{}:{ref:i},M=f.useCallback(()=>{if(w!==void 0)return A?.(w)},[A,w]),U=de();return z.createElement(p,{value:ee,props:{htmlFor:q?.id},slot:{open:W===x.Open,disabled:v}},z.createElement(xt,null,z.createElement(ue.Provider,{value:D},z.createElement(Be.Provider,{value:S},z.createElement(it,{value:se(W,{[x.Open]:he.Open,[x.Closed]:he.Closed})},d!=null&&z.createElement(Tt,{disabled:v,data:$!=null?{[d]:$}:{},form:r,onReset:M}),U({ourProps:B,theirProps:R,slot:re,defaultTag:sn,name:"Combobox"}))))))}let rn="input";function an(t,i){var e,o;let n=pe("Combobox.Input"),s=ie("Combobox.Input"),l=f.useId(),r=yt(),{id:d=r||`headlessui-combobox-input-${l}`,onChange:u,displayValue:c,disabled:v=s.disabled||!1,autoFocus:m=!1,type:h="text",...a}=t,[b]=k(n,p=>[p.inputElement]),O=f.useRef(null),F=me(O,i,dt(),n.actions.setInputElement),R=ge(b),[w,$]=k(n,p=>[p.comboboxState,p.isTyping]),A=Xe(),S=C(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:_.Nothing})}),V=f.useMemo(()=>{var p;return typeof c=="function"&&s.value!==void 0?(p=c(s.value))!=null?p:"":typeof s.value=="string"?s.value:""},[s.value,c]);Re(([p,B],[M,U])=>{if(n.state.isTyping)return;let g=O.current;g&&((U===x.Open&&B===x.Closed||p!==M)&&(g.value=p),requestAnimationFrame(()=>{if(n.state.isTyping||!g||R?.activeElement!==g)return;let{selectionStart:P,selectionEnd:I}=g;Math.abs((I??0)-(P??0))===0&&P===0&&g.setSelectionRange(g.value.length,g.value.length)}))},[V,w,R,$]),Re(([p],[B])=>{if(p===x.Open&&B===x.Closed){if(n.state.isTyping)return;let M=O.current;if(!M)return;let U=M.value,{selectionStart:g,selectionEnd:P,selectionDirection:I}=M;M.value="",M.value=U,I!==null?M.setSelectionRange(g,P,I):M.setSelectionRange(g,P)}},[w]);let T=f.useRef(!1),j=C(()=>{T.current=!0}),K=C(()=>{A.nextFrame(()=>{T.current=!1})}),G=C(p=>{switch(n.actions.setIsTyping(!0),p.key){case L.Enter:if(n.state.comboboxState!==x.Open||T.current)return;if(p.preventDefault(),p.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),s.mode===H.Single&&n.actions.closeCombobox();break;case L.ArrowDown:return p.preventDefault(),p.stopPropagation(),se(n.state.comboboxState,{[x.Open]:()=>n.actions.goToOption({focus:_.Next}),[x.Closed]:()=>n.actions.openCombobox()});case L.ArrowUp:return p.preventDefault(),p.stopPropagation(),se(n.state.comboboxState,{[x.Open]:()=>n.actions.goToOption({focus:_.Previous}),[x.Closed]:()=>{te.flushSync(()=>n.actions.openCombobox()),s.value||n.actions.goToOption({focus:_.Last})}});case L.Home:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:_.First});case L.PageUp:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:_.First});case L.End:if(p.shiftKey)break;return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:_.Last});case L.PageDown:return p.preventDefault(),p.stopPropagation(),n.actions.goToOption({focus:_.Last});case L.Escape:return n.state.comboboxState!==x.Open?void 0:(p.preventDefault(),n.state.optionsElement&&!s.optionsPropsRef.current.static&&p.stopPropagation(),s.mode===H.Single&&s.value===null&&S(),n.actions.closeCombobox());case L.Tab:if(n.state.comboboxState!==x.Open)return;s.mode===H.Single&&n.state.activationTrigger!==J.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),y=C(p=>{u?.(p),s.mode===H.Single&&p.target.value===""&&S(),n.actions.openCombobox()}),D=C(p=>{var B,M,U;let g=(B=p.relatedTarget)!=null?B:$e.find(P=>P!==p.currentTarget);if(!((M=n.state.optionsElement)!=null&&M.contains(g))&&!((U=n.state.buttonElement)!=null&&U.contains(g))&&n.state.comboboxState===x.Open)return p.preventDefault(),s.mode===H.Single&&s.value===null&&S(),n.actions.closeCombobox()}),W=C(p=>{var B,M,U;let g=(B=p.relatedTarget)!=null?B:$e.find(P=>P!==p.currentTarget);(M=n.state.buttonElement)!=null&&M.contains(g)||(U=n.state.optionsElement)!=null&&U.contains(g)||s.disabled||s.immediate&&n.state.comboboxState!==x.Open&&A.microTask(()=>{te.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(J.Focus)})}),E=Oe(),q=At(),{isFocused:ne,focusProps:Y}=Ae({autoFocus:m}),{isHovered:Q,hoverProps:le}=je({isDisabled:v}),Z=k(n,p=>p.optionsElement),re=f.useMemo(()=>({open:w===x.Open,disabled:v,invalid:s.invalid,hover:Q,focus:ne,autofocus:m}),[s,Q,ne,m,v,s.invalid]),ee=xe({ref:F,id:d,role:"combobox",type:h,"aria-controls":Z?.id,"aria-expanded":w===x.Open,"aria-activedescendant":k(n,n.selectors.activeDescendantId),"aria-labelledby":E,"aria-describedby":q,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:s.defaultValue!==void 0?c?.(s.defaultValue):null)!=null?o:s.defaultValue,disabled:v||void 0,autoFocus:m,onCompositionStart:j,onCompositionEnd:K,onKeyDown:G,onChange:y,onFocus:W,onBlur:D},Y,le);return de()({ourProps:ee,theirProps:a,slot:re,defaultTag:rn,name:"Combobox.Input"})}let un="button";function cn(t,i){let e=pe("Combobox.Button"),o=ie("Combobox.Button"),[n,s]=f.useState(null),l=me(i,s,e.actions.setButtonElement),r=f.useId(),{id:d=`headlessui-combobox-button-${r}`,disabled:u=o.disabled||!1,autoFocus:c=!1,...v}=t,[m,h,a]=k(e,y=>[y.comboboxState,y.inputElement,y.optionsElement]),b=Ve(h),O=m===x.Open;pt(O,{trigger:n,action:f.useCallback(y=>{if(n!=null&&n.contains(y.target))return ae.Ignore;if(h!=null&&h.contains(y.target))return ae.Ignore;let D=y.target.closest('[role="option"]:not([data-disabled])');return Ye(D)?ae.Select(D):a!=null&&a.contains(y.target)?ae.Ignore:ae.Close},[n,h,a]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let F=C(y=>{switch(y.key){case L.Space:case L.Enter:y.preventDefault(),y.stopPropagation(),e.state.comboboxState===x.Closed&&te.flushSync(()=>e.actions.openCombobox()),b();return;case L.ArrowDown:y.preventDefault(),y.stopPropagation(),e.state.comboboxState===x.Closed&&(te.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:_.First})),b();return;case L.ArrowUp:y.preventDefault(),y.stopPropagation(),e.state.comboboxState===x.Closed&&(te.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:_.Last})),b();return;case L.Escape:if(e.state.comboboxState!==x.Open)return;y.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&y.stopPropagation(),te.flushSync(()=>e.actions.closeCombobox()),b();return;default:return}}),R=C(y=>{y.preventDefault(),!lt(y.currentTarget)&&(y.button===Se.Left&&(e.state.comboboxState===x.Open?e.actions.closeCombobox():e.actions.openCombobox()),b())}),w=Oe([d]),{isFocusVisible:$,focusProps:A}=Ae({autoFocus:c}),{isHovered:S,hoverProps:V}=je({isDisabled:u}),{pressed:T,pressProps:j}=Ze({disabled:u}),K=f.useMemo(()=>({open:m===x.Open,active:T||m===x.Open,disabled:u,invalid:o.invalid,value:o.value,hover:S,focus:$}),[o,S,$,T,u,m]),G=xe({ref:l,id:d,type:et(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":a?.id,"aria-expanded":m===x.Open,"aria-labelledby":w,disabled:u||void 0,autoFocus:c,onPointerDown:R,onKeyDown:F},A,V,j);return de()({ourProps:G,theirProps:v,slot:K,defaultTag:un,name:"Combobox.Button"})}let dn="div",pn=Te.RenderStrategy|Te.Static;function fn(t,i){var e,o,n;let s=f.useId(),{id:l=`headlessui-combobox-options-${s}`,hold:r=!1,anchor:d,portal:u=!1,modal:c=!0,transition:v=!1,...m}=t,h=pe("Combobox.Options"),a=ie("Combobox.Options"),b=ft(d);b&&(u=!0);let[O,F]=ht(b),[R,w]=f.useState(null),$=mt(),A=me(i,b?O:null,h.actions.setOptionsElement,w),[S,V,T,j,K]=k(h,I=>[I.comboboxState,I.inputElement,I.buttonElement,I.optionsElement,I.activationTrigger]),G=ge(V||T),y=ge(j),D=tt(),[W,E]=nt(v,R,D!==null?(D&he.Open)===he.Open:S===x.Open);Pt(W,V,h.actions.closeCombobox);let q=a.__demoMode?!1:c&&S===x.Open;zt(q,y);let ne=a.__demoMode?!1:c&&S===x.Open;_t(ne,{allowed:f.useCallback(()=>[V,T,j],[V,T,j])}),X(()=>{var I;a.optionsPropsRef.current.static=(I=t.static)!=null?I:!1},[a.optionsPropsRef,t.static]),X(()=>{a.optionsPropsRef.current.hold=r},[a.optionsPropsRef,r]),Zt(S===x.Open,{container:j,accept(I){return I.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:I.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(I){I.setAttribute("role","none")}});let Y=Oe([T?.id]),Q=f.useMemo(()=>({open:S===x.Open,option:void 0}),[S]),le=C(()=>{h.actions.setActivationTrigger(J.Pointer)}),Z=C(I=>{I.preventDefault(),h.actions.setActivationTrigger(J.Pointer)}),re=xe(b?$():{},{"aria-labelledby":Y,role:"listbox","aria-multiselectable":a.mode===H.Multi?!0:void 0,id:l,ref:A,style:{...m.style,...F,"--input-width":we(V,!0).width,"--button-width":we(T,!0).width},onWheel:K===J.Pointer?void 0:le,onMouseDown:Z,...ot(E)}),ee=W&&S===x.Closed,p=Me(ee,(e=a.virtual)==null?void 0:e.options),B=Me(ee,a.value),M=C(I=>a.compare(B,I)),U=f.useMemo(()=>{if(!a.virtual)return a;if(p===void 0)throw new Error("Missing `options` in virtual mode");return p!==a.virtual.options?{...a,virtual:{...a.virtual,options:p}}:a},[a,p,(o=a.virtual)==null?void 0:o.options]);a.virtual&&Object.assign(m,{children:z.createElement(ue.Provider,{value:U},z.createElement(on,{slot:Q},m.children))});let g=de(),P=f.useMemo(()=>a.mode===H.Multi?a:{...a,isSelected:M},[a,M]);return z.createElement(kt,{enabled:u?t.static||W:!1,ownerDocument:G},z.createElement(ue.Provider,{value:P},g({ourProps:re,theirProps:{...m,children:z.createElement(vt,{freeze:ee},typeof m.children=="function"?(n=m.children)==null?void 0:n.call(m,Q):m.children)},slot:Q,defaultTag:dn,features:pn,visible:W,name:"Combobox.Options"})))}let hn="div";function mn(t,i){var e,o,n;let s=ie("Combobox.Option"),l=pe("Combobox.Option"),r=f.useId(),{id:d=`headlessui-combobox-option-${r}`,value:u,disabled:c=(n=(o=(e=s.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,u))!=null?n:!1,order:v=null,...m}=t,[h]=k(l,E=>[E.inputElement]),a=Ve(h),b=k(l,f.useCallback(E=>l.selectors.isActive(E,u,d),[u,d])),O=s.isSelected(u),F=f.useRef(null),R=st({disabled:c,value:u,domRef:F,order:v}),w=f.useContext(He),$=me(i,F,w?w.measureElement:null),A=C(()=>{l.actions.setIsTyping(!1),l.actions.onChange(u)});X(()=>l.actions.registerOption(d,R),[R,d]);let S=k(l,f.useCallback(E=>l.selectors.shouldScrollIntoView(E,u,d),[u,d]));X(()=>{if(S)return rt().requestAnimationFrame(()=>{var E,q;(q=(E=F.current)==null?void 0:E.scrollIntoView)==null||q.call(E,{block:"nearest"})})},[S,F]);let V=C(E=>{E.preventDefault(),E.button===Se.Left&&(c||(A(),Dt()||requestAnimationFrame(()=>a()),s.mode===H.Single&&l.actions.closeCombobox()))}),T=C(()=>{if(c)return l.actions.goToOption({focus:_.Nothing});let E=s.calculateIndex(u);l.actions.goToOption({focus:_.Specific,idx:E})}),j=gt(),K=C(E=>j.update(E)),G=C(E=>{if(!j.wasMoved(E)||c||b)return;let q=s.calculateIndex(u);l.actions.goToOption({focus:_.Specific,idx:q},J.Pointer)}),y=C(E=>{j.wasMoved(E)&&(c||b&&(s.optionsPropsRef.current.hold||l.actions.goToOption({focus:_.Nothing})))}),D=f.useMemo(()=>({active:b,focus:b,selected:O,disabled:c}),[b,O,c]),W={id:d,ref:$,role:"option",tabIndex:c===!0?void 0:-1,"aria-disabled":c===!0?!0:void 0,"aria-selected":O,disabled:void 0,onMouseDown:V,onFocus:T,onPointerEnter:K,onMouseEnter:K,onPointerMove:G,onMouseMove:G,onPointerLeave:y,onMouseLeave:y};return de()({ourProps:W,theirProps:m,slot:D,defaultTag:hn,name:"Combobox.Option"})}let vn=ce(ln),qe=ce(cn),Ke=ce(an),gn=Ot,Ge=ce(fn),Qe=ce(mn),bn=Object.assign(vn,{Input:Ke,Button:qe,Label:gn,Options:Ge,Option:Qe});function Rn({hidden:t,inode:i}){const[e,o]=f.useState(null),[n,s]=f.useState(""),{members:l,mnemonic:r}=i,d=new Set(l.map(a=>a.sub)),u=n.toLowerCase().replace(/\s/g,""),{users:c,addMember:v}=ct(),m=Object.values(c??{}).filter(a=>a.keys.find(b=>b.enabled)).filter(a=>!d.has(a.sub)).filter(a=>{const b=a.email.toLowerCase().replace(/\s/g,""),O=a.sub.toLowerCase().replace(/\s/g,"");return!u.length||b.includes(u)||O.includes(u)}),h=a=>a?`${a.email}`:"";return t?null:N.jsxs("div",{className:"flex items-center",children:[N.jsxs(bn,{value:e,onChange:o,children:[N.jsxs("div",{className:"grow flex my-2 border rounded-lg overflow-hidden border-gray-200",children:[N.jsx(Ke,{className:"w-full pl-3 text-blue",displayValue:h,onChange:a=>s(a.target.value)}),N.jsx(qe,{className:"px-2 py-1",children:N.jsx(ye,{size:24,className:"text-gray-400","aria-hidden":"true"})})]}),N.jsx(Ge,{transition:!0,anchor:"bottom",className:"divide-y border rounded-sm bg-white border-gray-200",children:m.map(a=>N.jsxs(Qe,{value:a,className:({active:b})=>`py-2 px-4 ${b?"bg-blue/40":""}`,children:[N.jsx(at,{className:"inline-block",size:14}),N.jsx("span",{className:"text-blue font-semibold",children:a.email}),N.jsxs("span",{className:"text-gray-600 px-3",children:["(id:"," ",a.sub,")"]})]},a.sub))})]}),N.jsx("div",{className:"pl-2",children:N.jsxs("button",{type:"button",disabled:!e,className:"whitespace-nowrap bg-blue py-1 px-2 text-white text-sm rounded-md disabled:bg-blue/50",onClick:()=>{v(r,e.sub),o(null)},children:[N.jsx(ut,{className:"inline-block mr-2",size:18}),"Add"]})})]})}export{Rn as default};
