import{r as O,R as m,P as d,j as o,u as P,b as v,d as N}from"./index-D81WwACb.js";import{P as k,I as w}from"./base-CJy2W7aR.js";import E from"./Member-CTy9pQtU.js";import{u as I}from"./Context-CTVvxjOO.js";import T from"./AddMember-BKd7HNzj.js";import{T as z}from"./trash-2-DYQ5HbAl.js";import"./Switch-BsbkrgHu.js";import"./label-DeZCyrFp.js";import"./index-BLzTb_JD.js";import"./description-CHTAMN5B.js";import"./folder-BHZ6CSSP.js";import"./core.esm-DQkDfR73.js";import"./copy-BIumn5ZQ.js";import"./calculate-active-index-PrioCODW.js";import"./portal-CrkO56Jr.js";function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b.apply(this,arguments)}function R(e,t){if(e==null)return{};var n=C(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function C(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var x=O.forwardRef(function(e,t){var n=e.color,s=n===void 0?"currentColor":n,i=e.size,a=i===void 0?24:i,c=R(e,["color","size"]);return m.createElement("svg",b({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),m.createElement("polyline",{points:"8 17 12 21 16 17"}),m.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),m.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"}))});x.propTypes={color:d.string,size:d.oneOfType([d.string,d.number])};x.displayName="DownloadCloud";function D({children:e,count:t}){return t===1?e:o.jsxs(o.Fragment,{children:[e,"s"]})}function Q({inode:e}){const{user:t,key:n}=P(),s=v(r=>r.parents),i=v(r=>r.searchStatus),{remove:a}=I(),c=N(r=>r.download);if(!t||i!=="idle")return null;const h=[e,...s].reverse(),u=h.findIndex(r=>r.members.find(l=>l.sub===t.sub&&l.permission===k.WRITE));let y=!1;const p=h.flatMap((r,l)=>r.members.map(f=>(f.sub===t.sub&&(y=!0),{key:`${r.mnemonic}-${f.sub}`,inode:r,member:f,readOnly:u===-1||l<u,isParent:r.mnemonic!==e.mnemonic}))).sort((r,l)=>r.member.sub.localeCompare(l.member.sub)),j=u!==-1,g=e.type===w.FILE||e.type===w.DIRECTORY;return o.jsxs("div",{className:"px-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Access"}),o.jsxs("div",{className:"text-sm font-medium px-3",children:[p.length,o.jsx(D,{count:p.length,children:" user"})]})]}),o.jsx("div",{className:"max-h-72 overflow-y-scroll border rounded-sm divide-y border-gray-200",children:p.map(r=>o.jsx(E,{inode:r.inode,member:r.member,readOnly:r.readOnly,isParent:r.isParent},r.key))}),o.jsx(T,{hidden:!j,inode:e}),o.jsxs("div",{className:"flex space-x-2 mt-2",children:[o.jsxs("button",{type:"button",disabled:!y||!g||!n,className:"w-full p-2 text-white bg-blue rounded-sm disabled:bg-blue/50 disabled:cursor-not-allowed inline-flex items-center",onClick:()=>c(e.mnemonic,n),children:[o.jsx(x,{className:"mr-2",size:24}),"Download"]}),o.jsxs("button",{type:"button",disabled:!j||!g,onClick:()=>a(),className:"w-full p-2 text-white bg-red rounded-sm disabled:bg-red/50 disabled:cursor-not-allowed inline-flex items-center",children:[o.jsx(z,{className:"mr-2",size:24}),"Delete"]})]})]})}export{Q as default};
